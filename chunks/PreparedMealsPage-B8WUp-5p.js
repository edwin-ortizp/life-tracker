import{j as e}from"./ui-vendor-DGxrBG5B.js";import{r as n}from"./react-vendor-B6CgFIIW.js";import{C as j,c as f,P as g}from"./PageLayout-Db-iUE0_.js";import{B as c}from"../assets/index-DHFvqX11.js";import{u as v}from"./usePreparedMeals-D15yvyRB.js";import{D as N,a as y,b as C,c as P,d as M}from"./dialog-D_bWg3ym.js";import{L as h}from"./label-J6Ezm96h.js";import{I as u}from"./input-DS5ck5rx.js";import"./firebase-B1tATv4n.js";import"./chart-vendor-DS0HZnUf.js";import"./utils-vendor-zid8MmOQ.js";const S=({open:o,onOpenChange:l,onSave:m,meal:a})=>{const[d,r]=n.useState(""),[t,i]=n.useState("");n.useEffect(()=>{a?(r(a.name),i(a.portions!==void 0?String(a.portions):"")):(r(""),i(""))},[a,o]);const p=()=>{const s={name:d};t&&(s.portions=Number(t)),m(s,a==null?void 0:a.id),l(!1)};return e.jsx(N,{open:o,onOpenChange:l,children:e.jsxs(y,{className:"sm:max-w-md",children:[e.jsx(C,{children:e.jsxs(P,{children:[a?"Editar":"Agregar"," Comida Preparada"]})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(h,{htmlFor:"pm-name",children:"Nombre"}),e.jsx(u,{id:"pm-name",value:d,onChange:s=>r(s.target.value)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(h,{htmlFor:"pm-portions",children:"Cantidad/Porciones (opcional)"}),e.jsx(u,{id:"pm-portions",type:"number",value:t,onChange:s=>i(s.target.value)})]})]}),e.jsx(M,{children:e.jsx(c,{onClick:p,children:"Guardar"})})]})})},b=()=>{const{meals:o,addMeal:l,updateMeal:m,deleteMeal:a}=v(),[d,r]=n.useState(!1),[t,i]=n.useState(null),p=(s,x)=>{x?m(x,s):l(s)};return e.jsxs(j,{className:"w-full h-full flex flex-col",children:[e.jsxs(f,{className:"p-4 space-y-4 overflow-y-auto flex-1",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"font-medium text-lg",children:"Comidas Preparadas"}),e.jsx(c,{onClick:()=>r(!0),children:"Agregar"})]}),o.length===0?e.jsx("p",{className:"text-center text-gray-500",children:"No hay comidas guardadas"}):e.jsx("div",{className:"space-y-2",children:o.map(s=>e.jsxs("div",{className:"flex justify-between items-center border p-2 rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),s.portions!==void 0&&e.jsxs("p",{className:"text-sm text-gray-500",children:["Porciones: ",s.portions]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>{i(s),r(!0)},children:"Editar"}),e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>a(s.id),children:"Eliminar"})]})]},s.id))})]}),e.jsx(S,{open:d||!!t,onOpenChange:s=>{s||i(null),r(s)},onSave:p,meal:t||void 0})]})},H=()=>e.jsx(g,{noPadding:!0,className:"h-full",children:e.jsx(b,{})});export{H as default};
