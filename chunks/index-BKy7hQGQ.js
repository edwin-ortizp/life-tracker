import{j as e}from"./ui-vendor-DGxrBG5B.js";import{r as t}from"./react-vendor-B6CgFIIW.js";import{C as B,c as H,a as De,b as be,d as ue}from"./PageLayout-Bn46ZyXr.js";import{B as v,a as z,u as G,d as L}from"../assets/index-DU2Ks861.js";import{O as Ce,Q as pe,H as Te,V as ke,h as xe,t as Ee,Z as he,j as fe,_ as je,$ as te}from"./chart-vendor-DS0HZnUf.js";import{T as U}from"./textarea-BoOEmm0d.js";import{I as Oe}from"./input-D2so7NiP.js";import{B as re,T as ne,A as ge}from"./TaskAiReprioritize-CKqihv0F.js";import{u as $e,R as Re,T as Ie}from"./useTaskData-Dlo2JOMJ.js";import{D as q,e as ye,a as V,b as Y,c as Z,f as se,d as Me}from"./dialog--KSabO_H.js";import{o as oe,h as K,m as ie,n as le,p as Pe}from"./utils-vendor-zid8MmOQ.js";import{S as Ae,a as ze,b as Je,c as Le,d as Q}from"./select-BbsFjDoU.js";import{e as X,g as J,f as ce,a as Ue}from"./dates-LQzD1DbF.js";import{e as _,f as ee,q as We,w as de,l as ve,m as Fe,h as _e,j as Be,k as He}from"./firebase-B1tATv4n.js";import{c as Ne,D as Ge,a as qe,b as Ve,d as me}from"./tokens-Cc9wJW-j.js";import"./progress-BmMLMWFs.js";import"./checkbox-aQK6cwtx.js";import{g as we}from"./ai-CJrI-CBw.js";import{u as Ye,b as Ze}from"./MoodAiSuggestion-CF3yzMWo.js";const Ke=({status:s,onLock:x})=>e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Mi Diario"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:new Date().toLocaleDateString("es-ES",{weekday:"long",day:"numeric",month:"long"})}),s==="saving"&&e.jsx("span",{className:"text-sm text-blue-500",children:"Guardando..."}),s==="saved"&&e.jsx("span",{className:"text-sm text-green-500",children:"Guardado"}),s==="error"&&e.jsx("span",{className:"text-sm text-red-500",children:"Error al guardar"})]}),e.jsx(v,{variant:"ghost",size:"icon",onClick:x,title:"Bloquear diario",children:e.jsx(pe,{className:"w-4 h-4"})})]})]}),Qe=({value:s,onChange:x})=>e.jsx(U,{value:s,onChange:u=>x(u.target.value),placeholder:"¬øC√≥mo ha sido tu d√≠a?",className:"w-full h-64 resize-none"}),Se=({lastUpdated:s,className:x=""})=>s?e.jsxs("div",{className:`flex items-center gap-2 text-sm text-gray-500 ${x}`,children:[e.jsx(Te,{className:"w-4 h-4"}),e.jsxs("span",{children:["√öltima actualizaci√≥n: ",s]})]}):null,Xe=({onUnlock:s,lastUpdated:x})=>{const[u,j]=t.useState(""),[n,h]=t.useState(!1),a=f=>{f.preventDefault(),u==="1234"?(s(),h(!1)):h(!0)};return e.jsx(B,{className:"w-full",children:e.jsx(H,{className:"p-4",children:e.jsxs("form",{onSubmit:a,className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx(pe,{className:"w-12 h-12 text-blue-500"})}),e.jsx("h3",{className:"text-center text-lg font-medium",children:"Diario Protegido"}),e.jsx("p",{className:"text-center text-sm text-gray-500",children:"Ingresa la contrase√±a para acceder a tu diario"}),e.jsx(Oe,{type:"password",value:u,onChange:f=>j(f.target.value),placeholder:"Contrase√±a",className:n?"border-destructive focus-visible:ring-destructive":""}),n&&e.jsx("p",{className:"text-sm text-red-500 text-center",children:"Contrase√±a incorrecta"}),e.jsx(v,{type:"submit",className:"w-full",children:"Desbloquear"}),e.jsx(Se,{lastUpdated:x,className:"justify-center"})]})})})},es=({selectedDate:s})=>{const{allTasks:x,status:u,error:j,showRecurrenceModal:n,currentTask:h,modalMode:a,addTask:f,editTask:g,toggleTask:l,deleteTask:o,completeRecurrentTask:i,setShowRecurrenceModal:c,openEditModal:d,openCreateModal:p}=$e(),[k,E]=t.useState(null),[$,N]=t.useState(!1),[R,M]=t.useState(""),[b,y]=t.useState(!1),m=x.filter(r=>r.isPrivate),T=m.filter(r=>r.dueDate&&oe(r.dueDate,s)),S=m.filter(r=>!r.completed&&(!r.dueDate||!oe(r.dueDate,s))),P=()=>{p(s,!0)},O=()=>{try{const r=JSON.parse(R);if(!Array.isArray(r)){z.error("El JSON debe contener un array de tareas");return}let D=0,w=0;r.forEach(C=>{if(C.title){let W;if(C.dueDate){const ae=new Date(C.dueDate);isNaN(ae.getTime())?(w++,console.warn(`Fecha inv√°lida para tarea "${C.title}": ${C.dueDate}`)):W=ae}f({title:C.title,description:C.description||"",dueDate:W,category:C.category||"personal",priority:C.priority||void 0,isPrivate:!0,isRecurrent:C.isRecurrent||!1,size:C.size||void 0}),D++}}),w>0?z.warning(`${D} tareas importadas. ${w} fechas inv√°lidas fueron omitidas.`):z.success(`${D} tareas privadas importadas correctamente`),M(""),y(!1)}catch(r){z.error("Error al importar las tareas. Verifica el formato JSON."),console.error("Error de importaci√≥n:",r)}},A=()=>{const r=m.map(w=>{var C,W;return{title:w.title,description:w.description||"",dueDate:(C=w.dueDate)==null?void 0:C.toISOString(),category:w.category,priority:w.priority,size:w.size,completed:w.completed,isRecurrent:w.isRecurrent||!1,...w.recurrence&&{recurrence:{frequency:w.recurrence.frequency,pattern:w.recurrence.pattern,customDays:w.recurrence.customDays,nextDate:(W=w.recurrence.nextDate)==null?void 0:W.toISOString()}}}}),D=JSON.stringify(r,null,2);navigator.clipboard.writeText(D).then(()=>{z.success("Tareas privadas copiadas al portapapeles con fechas incluidas")})};return e.jsxs(B,{className:"w-full mt-4",children:[e.jsx(De,{children:e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"text-lg",children:"üîí Tareas Privadas"}),e.jsxs(re,{variant:"secondary",className:"text-xs",children:[m.length," total"]})]})})}),e.jsxs(H,{className:"space-y-4",children:[T.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-sm text-gray-600 mb-2",children:["Para hoy (",T.length,")"]}),e.jsx("div",{className:"space-y-2",children:T.map(r=>e.jsx(ne,{task:r,onToggle:l,onDelete:o,onEdit:d,onView:D=>{E(D),N(!0)},variant:"list"},r.id))})]}),S.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-sm text-gray-600 mb-2",children:["Pendientes (",S.length,")"]}),e.jsx("div",{className:"space-y-2",children:S.map(r=>e.jsx(ne,{task:r,onToggle:l,onDelete:o,onEdit:d,onView:D=>{E(D),N(!0)},variant:"list"},r.id))})]}),m.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("p",{children:"No tienes tareas privadas"}),e.jsx("p",{className:"text-sm",children:"Crea una nueva o importa desde JSON"})]}),u==="saving"&&e.jsx(re,{variant:"secondary",className:"text-xs",children:"Guardando..."}),j&&e.jsx("p",{className:"text-sm text-red-500",children:j})]}),e.jsxs(ue,{className:"justify-end flex-wrap gap-2",children:[e.jsxs(q,{open:b,onOpenChange:y,children:[e.jsx(ye,{asChild:!0,children:e.jsxs(v,{size:"sm",variant:"outline",children:[e.jsx(ke,{className:"w-4 h-4 mr-2"}),"Importar"]})}),e.jsxs(V,{children:[e.jsxs(Y,{children:[e.jsx(Z,{children:"Importar Tareas Privadas"}),e.jsx(se,{children:"Pega el JSON con las tareas a importar. Todas se marcar\\u00e1n como privadas."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(U,{placeholder:`Ejemplo - Puedes incluir fechas en formato ISO (YYYY-MM-DD) o dejarlas sin fecha:
[
  {
    "title": "Reflexi√≥n personal importante",
    "description": "Pensar sobre mis metas de vida",
    "dueDate": "2024-12-31",
    "category": "personal",
    "priority": "do",
    "size": "mediana"
  },
  {
    "title": "Tarea sensible del trabajo",
    "description": "Revisar tema confidencial",
    "dueDate": "2024-06-15T14:30:00Z",
    "category": "work",
    "priority": "decide"
  },
  {
    "title": "Tarea sin fecha espec√≠fica",
    "description": "Esta tarea no tiene fecha l√≠mite",
    "category": "personal"
  }
]

Formatos de fecha soportados:
- "2024-12-31" (solo fecha)
- "2024-06-15T14:30:00Z" (fecha y hora ISO)
- "2024-06-15T14:30:00" (fecha y hora local)
- Sin campo "dueDate" = sin fecha asignada`,value:R,onChange:r=>M(r.target.value),rows:15,className:"font-mono text-sm"}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(v,{variant:"outline",onClick:()=>y(!1),children:"Cancelar"}),e.jsx(v,{onClick:O,disabled:!R.trim(),children:"Importar Tareas"})]})]})]})]}),e.jsxs(v,{size:"sm",variant:"outline",onClick:A,children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"Exportar"]}),e.jsxs(v,{size:"sm",onClick:P,children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Nueva Privada"]})]}),e.jsx(Re,{isOpen:n,onClose:()=>c(),onConfirm:r=>{const D={...r,isPrivate:!0};a==="complete"?i(D):a==="edit"?g(h.id,D):f(D)},task:h||{id:"",title:"",completed:!1,category:"personal",createdAt:{seconds:Date.now()/1e3}},mode:a}),e.jsx(Ie,{task:k,isOpen:$,onClose:()=>N(!1),onEdit:r=>{N(!1),d(r)},onToggle:(r,D)=>l(r,D)})]})},ss=s=>s.charAt(0).toUpperCase()+s.slice(1),as=()=>{const{user:s}=G();return{exportRange:async(u,j)=>{var o;if(!s)return;const n=new Date(u);n.setHours(0,0,0,0);const h=new Date(j);h.setHours(0,0,0,0);let a=`# Diario del ${K(n,"dd MMMM yyyy",{locale:X})} al ${K(h,"dd MMMM yyyy",{locale:X})}

`;for(let i=new Date(n);i<=h;i.setDate(i.getDate()+1)){const c=J(i),d=_(L,"journal",`${s.uid}_${c}`),p=await ee(d),k=p.exists()&&p.data().text||"",E=_(L,"moods",`${s.uid}_${c}`),$=await ee(E),N=$.exists()?$.data():null,R=We(ve(L,"tasks"),de("userId","==",s.uid),de("completed","==",!0)),b=(await Fe(R)).docs.map(m=>({id:m.id,...m.data()})).filter(m=>{var S;if(!((S=m.createdAt)!=null&&S.seconds))return!1;const T=new Date(m.createdAt.seconds*1e3);return J(T)===c}),y=K(i,"EEEE, d 'de' MMMM 'de' yyyy",{locale:X});a+=`### ${ss(y)}

`,N!=null&&N.moods&&N.moods.length>0&&(a+=`**Estados de √°nimo:**
`,N.moods.forEach(m=>{a+=`- ${m.time}: ${m.emoji} ${m.text}
`}),a+=`
`),b.length>0&&(a+=`**Tareas completadas:**
`,b.forEach(m=>{a+=`- ‚úÖ ${m.title}${m.description?` - ${m.description}`:""}
`}),a+=`
`),k.trim()?a+=`**Diario:**
${k}

`:!((o=N==null?void 0:N.moods)!=null&&o.length)&&!b.length&&(a+=`_Sin entradas para este d√≠a_

`)}const f=new Blob([a],{type:"text/markdown;charset=utf-8"}),g=URL.createObjectURL(f),l=document.createElement("a");l.href=g,l.download=`${J(n)}_a_${J(h)}.md`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(g)}}},ts=()=>{const{exportRange:s}=as(),[x,u]=t.useState(!1),[j,n]=t.useState("thisWeek"),[h,a]=t.useState(new Date),[f,g]=t.useState(new Date),l=()=>{const o=new Date;let i,c;if(j==="thisWeek")i=ie(o,{weekStartsOn:1}),c=le(o,{weekStartsOn:1});else if(j==="lastWeek"){const d=Pe(o,1);i=ie(d,{weekStartsOn:1}),c=le(d,{weekStartsOn:1})}else i=h,c=f;s(i,c),u(!1)};return e.jsxs(q,{open:x,onOpenChange:u,children:[e.jsx(ye,{asChild:!0,children:e.jsxs(v,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(xe,{className:"w-4 h-4"}),"Exportar Diario"]})}),e.jsxs(V,{children:[e.jsx(Y,{children:e.jsx(Z,{children:"Exportar Diario"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(Ae,{value:j,onValueChange:o=>n(o),children:[e.jsx(ze,{className:"w-full",children:e.jsx(Je,{placeholder:"Seleccionar rango"})}),e.jsxs(Le,{children:[e.jsx(Q,{value:"thisWeek",children:"Esta semana"}),e.jsx(Q,{value:"lastWeek",children:"Semana pasada"}),e.jsx(Q,{value:"custom",children:"Rango personalizado"})]})]}),j==="custom"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"date",className:"border rounded-md px-2 py-1 flex-1",value:ce(h),onChange:o=>a(new Date(o.target.value))}),e.jsx("input",{type:"date",className:"border rounded-md px-2 py-1 flex-1",value:ce(f),onChange:o=>g(new Date(o.target.value))})]})]}),e.jsxs(Me,{className:"gap-2",children:[e.jsx(v,{variant:"outline",onClick:()=>u(!1),children:"Cancelar"}),e.jsx(v,{onClick:l,children:"Exportar"})]})]})]})},I=we("journal"),rs=I?`https://generativelanguage.googleapis.com/v1beta/models/${I.model}:generateContent`:"",ns=({entry:s,open:x,onOpenChange:u,onInsert:j})=>{const[n,h]=t.useState(!1),a=x!==void 0?x:n,f=u??h,[g,l]=t.useState(""),[o,i]=t.useState(!1),[c,d]=t.useState(""),[p,k]=t.useState(0),E="AIzaSyAW4Ot-z7OH4ZR3OeaN7vcbkEDlWpo1aMY",$=(I==null?void 0:I.prompt)??"Reescribe el siguiente texto del diario de forma clara y natural:",N=I==null?void 0:I.params;t.useEffect(()=>{a&&d(`${$}
${s}`)},[a,s]),t.useEffect(()=>{k(Ne(c))},[c]);const R=async()=>{var b,y,m,T,S;if(s){i(!0);try{const O=await(await fetch(`${rs}?key=${E}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:c}]}],...N})})).json(),A=(S=(T=(m=(y=(b=O==null?void 0:O.candidates)==null?void 0:b[0])==null?void 0:y.content)==null?void 0:m.parts)==null?void 0:T[0])==null?void 0:S.text;l(A||"No se pudo obtener respuesta")}catch{l("Error al consultar la API")}finally{i(!1)}}},M=()=>{f(!1),l(""),d(""),k(0)};return e.jsxs(q,{open:a,onOpenChange:b=>b?f(!0):M(),children:[x===void 0&&e.jsxs(v,{size:"sm",variant:"outline",onClick:()=>f(!0),className:"flex items-center gap-2",children:[e.jsx(he,{className:"w-4 h-4"}),"Mejorar entrada"]}),e.jsxs(V,{className:"w-full sm:max-w-5xl max-h-[90vh] overflow-auto",children:[e.jsxs(Y,{children:[e.jsx(Z,{children:"Reescribir Diario"}),e.jsx(se,{children:"Gemini transformar√° tu texto en un estilo m√°s natural."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(U,{value:c,onChange:b=>d(b.target.value),className:"max-h-[500px] overflow-y-auto"}),e.jsxs("p",{className:"text-xs text-right",children:["Tokens: ",p," ",p>3500&&e.jsx("span",{className:"text-red-500",children:"¬°Prompt demasiado largo!"})]}),e.jsxs(v,{onClick:R,disabled:o||!E,className:"w-full flex items-center justify-center gap-2",children:[o&&e.jsx(fe,{className:"w-4 h-4 animate-spin"}),o?"Consultando...":"Generar versi√≥n mejorada"]}),o&&e.jsx(ge,{className:"mt-2"}),g&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx(v,{type:"button",size:"icon",variant:"ghost",onClick:()=>{navigator.clipboard.writeText(g),z.success("Texto copiado")},children:e.jsx(je,{className:"w-4 h-4"})})}),e.jsx(U,{readOnly:!0,value:g,className:"max-h-[300px]"}),j&&e.jsx(v,{type:"button",className:"w-full",onClick:()=>j(g),children:"Insertar en entrada"})]})]})]})]})},F=we("journal"),os=F?`https://generativelanguage.googleapis.com/v1beta/models/${F.model}:generateContent`:"",is=({entry:s,selectedDate:x,open:u,onOpenChange:j})=>{const{user:n}=G(),[h,a]=t.useState(!1),f=u!==void 0?u:h,g=j??a,[l,o]=t.useState(""),[i,c]=t.useState(""),[d,p]=t.useState(!1),[k,E]=t.useState(0),$="AIzaSyAW4Ot-z7OH4ZR3OeaN7vcbkEDlWpo1aMY",N="Analiza la siguiente entrada del diario y los estados de √°nimo del d√≠a. Da una breve opini√≥n sobre c√≥mo fue y sugiere mejoras para ma√±ana.",R=F==null?void 0:F.params;t.useEffect(()=>{f?(async()=>{let y="";if(n){const m=J(x),T=_(ve(L,"moods"),`${n.uid}_${m}`),S=await ee(T);y=(S.exists()&&Array.isArray(S.data().moods)?S.data().moods:[]).map(O=>`${O.emoji} ${O.text}`).join(", ")}c(`${N}
Moods: ${y}
Diario:
${s}`)})():(c(""),o(""))},[f,s,n,x]),t.useEffect(()=>{E(Ne(i))},[i]);const M=async()=>{var y,m,T,S,P;if(i){p(!0);try{const A=await(await fetch(`${os}?key=${$}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:i}]}],...R})})).json(),r=(P=(S=(T=(m=(y=A==null?void 0:A.candidates)==null?void 0:y[0])==null?void 0:m.content)==null?void 0:T.parts)==null?void 0:S[0])==null?void 0:P.text;o(r||"No se pudo obtener respuesta")}catch{o("Error al consultar la API")}finally{p(!1)}}},b=()=>{g(!1),o(""),c(""),E(0)};return e.jsx(q,{open:f,onOpenChange:y=>y?g(!0):b(),children:e.jsxs(V,{className:"w-full sm:max-w-5xl max-h-[90vh] overflow-auto",children:[e.jsxs(Y,{children:[e.jsx(Z,{children:"Opini√≥n del d√≠a"}),e.jsx(se,{children:"Resumen y sugerencias para ma√±ana."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(U,{value:i,onChange:y=>c(y.target.value),className:"max-h-[500px] overflow-y-auto"}),e.jsxs("p",{className:"text-xs text-right",children:["Tokens: ",k," ",k>3500&&e.jsx("span",{className:"text-red-500",children:"¬°Prompt demasiado largo!"})]}),e.jsxs(v,{onClick:M,disabled:d||!$,className:"w-full flex items-center justify-center gap-2",children:[d&&e.jsx(fe,{className:"w-4 h-4 animate-spin"}),d?"Consultando...":"Analizar d√≠a"]}),d&&e.jsx(ge,{className:"mt-2"}),l&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx(v,{type:"button",size:"icon",variant:"ghost",onClick:()=>{navigator.clipboard.writeText(l),z.success("Texto copiado")},children:e.jsx(je,{className:"w-4 h-4"})})}),e.jsx(U,{readOnly:!0,value:l,className:"max-h-[300px]"})]})]})]})})},ls=({entry:s,selectedDate:x,onInsert:u})=>{const[j,n]=t.useState(!1),[h,a]=t.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs(Ge,{children:[e.jsx(qe,{asChild:!0,children:e.jsxs(v,{size:"sm",variant:"outline",className:"flex items-center gap-2 text-blue-600",children:[e.jsx(he,{className:"w-4 h-4"}),"IA"]})}),e.jsxs(Ve,{align:"end",children:[e.jsx(me,{onSelect:()=>n(!0),children:"Reescribir entrada"}),e.jsx(me,{onSelect:()=>a(!0),children:"Opini√≥n y consejos"})]})]}),e.jsx(ns,{entry:s,open:j,onOpenChange:n,onInsert:u}),e.jsx(is,{entry:s,selectedDate:x,open:h,onOpenChange:a})]})},cs=s=>{const[x,u]=t.useState(""),[j,n]=t.useState("idle"),[h,a]=t.useState(null),[f,g]=t.useState(void 0),{user:l}=G();return t.useEffect(()=>{if(!l)return;const i=J(s),c=_(L,"journal",`${l.uid}_${i}`),d=_e(c,p=>{if(p.exists()){if(u(p.data().text||""),n("saved"),p.data().lastUpdated){const k=p.data().lastUpdated.toDate();g(Ue(k))}}else u(""),n("idle"),g(void 0)},p=>{a(p.message),n("error")});return()=>d()},[l,s]),{entry:x,setEntry:u,status:j,error:h,saveEntry:async i=>{if(!l)return;n("saving"),a(null);const c=J(s),d=_(L,"journal",`${l.uid}_${c}`);try{await Be(d,{userId:l.uid,text:i,date:c,lastUpdated:He(),displayTime:new Date().toLocaleString("es-ES",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"2-digit"})},{merge:!0}),n("saved")}catch(p){a(p instanceof Error?p.message:"Error al guardar"),n("error")}},lastUpdated:f}},Es=({selectedDate:s})=>{const{user:x}=G(),{isUnlocked:u,setUnlocked:j}=Ye(),{entry:n,setEntry:h,status:a,error:f,saveEntry:g,lastUpdated:l}=cs(s),{entry:o,setEntry:i}=Ze();t.useEffect(()=>{i(n)},[n,i]);const c=()=>{j(!1)};return x?u?e.jsxs(e.Fragment,{children:[e.jsxs(B,{className:"w-full",children:[e.jsxs(H,{className:"p-4",children:[e.jsx(Ke,{status:a,onLock:c,isUnlocked:u}),e.jsx(Qe,{value:o,onChange:d=>{i(d),h(d)}}),f&&e.jsx("p",{className:"mt-2 text-sm text-red-500",children:f})]}),e.jsxs(ue,{className:"flex flex-col items-end gap-2 sm:flex-row sm:justify-between",children:[e.jsx(Se,{lastUpdated:l}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(v,{onClick:()=>g(o),disabled:a==="saving",children:a==="saving"?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"w-4 h-4 animate-spin"}),"Guardando..."]}):e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"w-4 h-4"}),"Guardar entrada"]})}),e.jsx(ls,{entry:o,selectedDate:s,onInsert:d=>{i(p=>p+(p?`
`:"")+d),h(p=>p+(p?`
`:"")+d)}}),e.jsx(ts,{})]})]})]}),e.jsx(es,{selectedDate:s})]}):e.jsx(Xe,{onUnlock:()=>j(!0),lastUpdated:l}):e.jsx(B,{className:"w-full",children:e.jsx(H,{className:"p-4 text-center",children:e.jsx("p",{children:"Inicia sesi√≥n para usar el diario"})})})};export{Es as J};
